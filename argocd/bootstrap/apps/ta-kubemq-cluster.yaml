apiVersion: argoproj.io/v1alpha1
kind: ApplicationSet
metadata:
  name: ta-kubemq-cluster
  namespace: argocd
spec:
  generators:
  - list:
      elements:
      - env: prod
  template:
    metadata: 
      name: {{env}}-ta-kubemq-cluster
    destination:
      namespace: prod
      server: https://kubernetes.default.svc
    project: ta
    source:
      path: apps/kubemq-cluster
      repoURL: https://github.com/dbgjerez/ta.git
      targetRevision: HEAD
    syncPolicy:
      automated: {}